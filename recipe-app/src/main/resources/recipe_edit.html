<!doctype html>
<html lang="en" style="height:100%">
  #head ( "Edit $recipe.recipe.title" )
  <body style="height:100%">
    #scripts
    <div class="d-flex flex-column h-100">    
    #navbar ( "edit", $recipe )
    <script>
    /*
     * I am not a JS guy. This is totally naive code written from google searches.
     */
  function postRecipe() {
  var XHR = new XMLHttpRequest();
        
  // Redirect on success
  XHR.addEventListener('load', function(event) {
    window.location.href = "/recipe/$recipe.id";
  });

  // Alert on error
  XHR.addEventListener('error', function(event) {
    alert('Oops! Something goes wrong.');
  });
  
  XHR.open('PUT', '/api/recipe/$recipe.id');
  XHR.setRequestHeader('Content-Type', 'text/plain');
  XHR.send(document.getElementById('recipeTxt').value);
    }
    </script>
    <div class="container-fluid d-flex flex-column flex-grow-1 h-100">
    <form class="d-flex flex-column h-100 flex-grow-1">
      <div class="form-group d-flex flex-column h-100 flex-grow-1">
 	  <textarea class="form-control h-100 flex-grow-1" id="recipeTxt">$recipeTxt</textarea>
 	  </div>
 	  <div class="form-group">
 	  <button type="button" class="btn btn-primary" onClick="postRecipe()">Save</button>
 	  <button type="button" class="btn btn-secondary" onClick="window.location.href = '/recipe/$recipe.id'">Cancel</button>
 	  </div>
 	</form>
 	</div>
  </div>
  </body>
</html>